# –£–º–Ω–∞—è –ø–æ–º–ø–∞ –Ω–∞ ESP32

–ü—Ä–æ–µ–∫—Ç —É–º–Ω–æ–π –ø–æ–º–ø—ã –Ω–∞ ESP32 —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ —Ç–∞–∫—Ç–æ–≤—É—é –∫–Ω–æ–ø–∫—É –∏ MQTT-–±—Ä–æ–∫–µ—Ä Dealgate.ru –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞–º–∏ (–ê–ª–∏—Å–∞).

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞–ª–∏–≤–∞ –≤–æ–¥—ã –≤ —á–∞–π–Ω–∏–∫ —Å –≥–æ–ª–æ—Å–æ–≤—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –ê–ª–∏—Å—É. 
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —É—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã, —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–º–ø–æ–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç/–≤—ã–∫–ª—é—á–∞–µ—Ç —á–∞–π–Ω–∏–∫.

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- ESP32 - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
- 2 —Ä–µ–ª–µ (–ø–æ–º–ø–∞ + –ø–∏—Ç–∞–Ω–∏–µ —á–∞–π–Ω–∏–∫–∞)
- –¢–µ–Ω–∑–æ–¥–∞—Ç—á–∏–∫ HX711
- OLED –¥–∏—Å–ø–ª–µ–π SSD1306 (128x64)
- –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥
- –¢–∞–∫—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞
- –ó—É–º–º–µ—Ä

## üìå –†–∞—Å–ø–∏–Ω–æ–≤–∫–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü–∏–Ω ESP32 |
|-----------|-----------|
| –†–µ–ª–µ –ø–æ–º–ø—ã | 26 |
| –†–µ–ª–µ –ø–∏—Ç–∞–Ω–∏—è —á–∞–π–Ω–∏–∫–∞ | 25 |
| HX711 DT | 16 |
| HX711 SCK | 4 |
| –ö–Ω–æ–ø–∫–∞ | 27 |
| –î–∏—Å–ø–ª–µ–π SDA | 21 |
| –î–∏—Å–ø–ª–µ–π SCL | 22 |
| –°–µ—Ä–≤–æ–ø—Ä–∏–≤–æ–¥ | 32 |
| –ó—É–º–º–µ—Ä | 33 |

## üì° MQTT —Ç–æ–ø–∏–∫–∏

### –ò—Å—Ö–æ–¥—è—â–∏–µ (—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞)
- `/devices/pump/water_level` - —É—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã (0,1,2)
- `/devices/pump/kettle` - –Ω–∞–ª–∏—á–∏–µ —á–∞–π–Ω–∏–∫–∞ (0,1)

### –í—Ö–æ–¥—è—â–∏–µ (–Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ)
- `/devices/pump/filling` - –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ª–∏–≤–∞ (1-8)

## üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π

- **–û–¥–∏–Ω–∞—Ä–Ω—ã–π –∫–ª–∏–∫:** –Ω–∞–ª–∏–≤ –æ–¥–Ω–æ–π –∫—Ä—É–∂–∫–∏ / –¥–æ –º–∏–Ω–∏–º—É–º–∞
- **–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫:** –ø–æ–ª–Ω—ã–π —á–∞–π–Ω–∏–∫
- **–¢—Ä–æ–π–Ω–æ–π –∫–ª–∏–∫:** –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞ –≤–µ—Å–æ–≤
- **–î–æ–ª–≥–æ–µ –Ω–∞–∂–∞—Ç–∏–µ (3—Å):** –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–ª–∏–≤–∞
- **–£–¥–µ—Ä–∂–∞–Ω–∏–µ 5-15—Å:** —Å–±—Ä–æ—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å –æ–±—Ä–∞—Ç–Ω—ã–º –æ—Ç—Å—á–µ—Ç–æ–º

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ ESP32
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ `data` –≤ SPIFFS
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ Wi-Fi `Smart_Pump` (–ø–∞—Ä–æ–ª—å: 12345678)
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `192.168.4.1`
5. –í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π Wi-Fi —Å–µ—Ç–∏ –∏ MQTT —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Dealgate

## –°–•–ï–ú–ê –ü–ï–†–ï–î–ê–ß–ò –î–ê–ù–ù–´–•

```mermaid
graph TD
    A[–£–º–Ω–∞—è –ø–æ–º–ø–∞ ESP32] -->|water_level 0/1/2| B(MQTT –ë—Ä–æ–∫–µ—Ä<br>mqtt.dealgate.ru:1883)
    A -->|kettle 0/1| B
    B -->|commands 1-8| A
    
    B -->|–¥–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è| C[Dealgate –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞]
    C -->|–∫–æ–º–∞–Ω–¥—ã| B
    
    C <-->|–≥–æ–ª–æ—Å–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã| D{–ê–ª–∏—Å–∞}
    
    E[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] -->|–∫–Ω–æ–ø–∫–∞/–¥–∏—Å–ø–ª–µ–π| A
    E -->|–≥–æ–ª–æ—Å–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã| D
    D -->|–≥–æ–ª–æ—Å–æ–≤—ã–µ –æ—Ç–≤–µ—Ç—ã| E
    
    F[–î—Ä—É–≥–∏–µ MQTT –∫–ª–∏–µ–Ω—Ç—ã] -.->|–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥| B
    
    style A fill:#e1f5fe,stroke:#01579b
    style B fill:#fff9c4,stroke:#fbc02d
    style C fill:#e8f5e8,stroke:#2e7d32
    style D fill:#f3e5f5,stroke:#7b1fa2
```

## üëè –ê–≤—Ç–æ—Ä—ã –∏ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

**–ê–≤—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞:** vanovskiy

**–ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –ø–æ–º–æ—â—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:**
- [DeepSeek](https://www.deepseek.com/) - –ø–æ–º–æ—â—å –≤ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ –∫–æ–¥–∞, –æ—Ç–ª–∞–¥–∫–µ, —Å–æ–∑–¥–∞–Ω–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
  –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ GitHub.
