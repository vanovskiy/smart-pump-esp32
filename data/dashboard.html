<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>–£–º–Ω–∞—è –ø–æ–º–ø–∞ - –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üö∞ –£–º–Ω–∞—è –ø–æ–º–ø–∞</h1>
            <div class="header-buttons">
                <button onclick="showChangePasswordDialog()" class="btn btn-secondary">üîê –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                <a href="/logout" class="btn btn-danger">–í—ã–π—Ç–∏</a>
            </div>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="card">
            <h2>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h2>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">–í–µ—Å —á–∞–π–Ω–∏–∫–∞</span>
                    <span class="info-value" id="currentWeight">-- –≥</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–í–µ—Å –ø—É—Å—Ç–æ–≥–æ</span>
                    <span class="info-value" id="emptyWeight">-- –≥</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–í–æ–¥–∞</span>
                    <span class="info-value" id="waterVolume">-- –º–ª</span>
                </div>
                <div class="info-item">
                    <span class="info-label">–ö—Ä—É–∂–µ–∫</span>
                    <span class="info-value" id="cups">--</span>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä -->
        <div class="card">
            <h2>–£—Ä–æ–≤–µ–Ω—å –≤–æ–¥—ã</h2>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar" style="width: 0%"></div>
            </div>
            <div class="progress-labels">
                <span>0 –º–ª</span>
                <span id="maxVolume">1700 –º–ª</span>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã -->
        <div class="card">
            <h2>–°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã</h2>
            <div class="status-grid">
                <div class="status-item">
                    <span class="status-label">–†–µ–∂–∏–º:</span>
                    <span class="status-value" id="systemState">--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">–ß–∞–π–Ω–∏–∫:</span>
                    <span class="status-value" id="kettlePresent">--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">WiFi:</span>
                    <span class="status-value" id="wifiStatus">--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">MQTT:</span>
                    <span class="status-value" id="mqttStatus">--</span>
                </div>
            </div>
        </div>

        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–ª–∏–≤–æ–º -->
        <div class="card">
            <h2>–ù–∞–ª–∏–≤ –≤–æ–¥—ã</h2>
            <div class="button-grid">
                <button class="btn btn-primary" onclick="fillCups(1)">1 –∫—Ä—É–∂–∫–∞</button>
                <button class="btn btn-primary" onclick="fillCups(2)">2 –∫—Ä—É–∂–∫–∏</button>
                <button class="btn btn-primary" onclick="fillCups(3)">3 –∫—Ä—É–∂–∫–∏</button>
                <button class="btn btn-primary" onclick="fillCups(4)">4 –∫—Ä—É–∂–∫–∏</button>
                <button class="btn btn-primary" onclick="fillCups(5)">5 –∫—Ä—É–∂–µ–∫</button>
                <button class="btn btn-primary" onclick="fillCups(6)">6 –∫—Ä—É–∂–µ–∫</button>
                <button class="btn btn-success" onclick="fillFull()">–ü–æ–ª–Ω—ã–π —á–∞–π–Ω–∏–∫</button>
                <button class="btn btn-danger" onclick="stopFill()">‚èπÔ∏è –°—Ç–æ–ø</button>
            </div>
        </div>

        <!-- –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ -->
        <div class="card">
            <h2>–ö–∞–ª–∏–±—Ä–æ–≤–∫–∞</h2>
            <div class="calibration-info">
                <p>–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç: <span id="calibrationFactor">--</span></p>
                <p>–°—Ç–∞—Ç—É—Å: <span id="calibrationStatus">--</span></p>
            </div>
            <button class="btn btn-warning" onclick="startCalibration()">üîÑ –ö–∞–ª–∏–±—Ä–æ–≤–∫–∞ –ø—É—Å—Ç–æ–≥–æ —á–∞–π–Ω–∏–∫–∞</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–º–µ–Ω—ã –ø–∞—Ä–æ–ª—è -->
    <div id="passwordModal" class="modal" style="display:none;">
        <div class="modal-content">
            <h3>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>
            <input type="password" id="oldPassword" placeholder="–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å">
            <input type="password" id="newPassword" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–º–∏–Ω. 4 —Å–∏–º–≤–æ–ª–∞)">
            <input type="password" id="confirmPassword" placeholder="–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
            <div class="modal-buttons">
                <button onclick="changePassword()" class="btn btn-primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button onclick="closeModal()" class="btn btn-secondary">–û—Ç–º–µ–Ω–∞</button>
            </div>
            <div id="passwordError" class="error" style="display:none;"></div>
        </div>
    </div>

    <script src="/script.js"></script>
</body>
</html>